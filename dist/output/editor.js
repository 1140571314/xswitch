!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=(e,t)=>{if(/\\|\[|]|\(|\)|\*|\$|\^/i.test(t)){if(new RegExp(t.replace("??","\\?\\?"),"i").test(e))return"reg"}else{if(e.indexOf(t)>-1)return"string"}return!1};t.default=new class{constructor(){this._lastRequestId=null,this._disabled="enabled",this._config={},this._originRequest=new Map,this._originRequestHeaders=new Map,this.urls=new Array(200)}get disabled(){return this._disabled}set disabled(e){this._disabled=e}get config(){return this._config}set config(e){this._config=Object.assign({},e)}onHeadersReceivedCallback(e,t=!0){let n=this.config.cors,s=!1;if(n&&n.length&&n.forEach(t=>{o(e.url,t)&&(s=!0)}),"disabled"==this.disabled||!t||!s)return{};e.url;let r=[],i=(this._originRequest.get(e.requestId)?this._originRequest.get(e.requestId):e.initiator)||"*";if(e.responseHeaders&&e.responseHeaders.filter){let t=!1,n="";r=e.responseHeaders.filter(e=>("access-control-allow-origin"===e.name.toLowerCase()&&(n=e.value),"access-control-allow-credentials"===e.name.toLowerCase()&&(t=e.value),["access-control-allow-origin","access-control-allow-credentials","access-control-allow-methods","access-control-allow-headers"].indexOf(e.name.toLowerCase())<0)),t&&(i=n)}"*"===i&&"null"===this._originRequest.get(e.requestId)&&(i="*"),r.push({name:"Access-Control-Allow-Origin",value:i}),r.push({name:"Access-Control-Allow-Credentials",value:"true"}),r.push({name:"Access-Control-Allow-Methods",value:"*"});let c=this._originRequestHeaders.get(e.requestId)?","+this._originRequestHeaders.get(e.requestId):"";return r.push({name:"Access-Control-Allow-Headers",value:"Content-Type, Access-Control-Allow-Headers, Authorization, X-Requested-With, X-Referer"+c}),{responseHeaders:r}}redirectToMatchingRule(e){const t=this.config.proxy;let n=e.url;if(!t||!t.length||/^chrome-extension:\/\//i.test(n))return{};/http(s?):\/\/.*\.(js|css|json|jsonp)/.test(n)&&this.urls.indexOf(n)<0&&(this.urls.shift(),this.urls.push(n));try{for(let s=0;s<t.length;s++){const r=t[s];if(r&&r[0]&&"string"==typeof r[1]){let t=r[0],s=o(n,t);if(e.requestId!==this._lastRequestId)if("reg"===s){let e=new RegExp(t.replace("??","\\?\\?"),"i");n=n.replace(e,r[1])}else"string"===s&&(n=n.split(r[0]).join(r[1]))}}}catch(e){console.error("rule match error",e)}return this._lastRequestId=e.requestId,n===e.url?{}:{redirectUrl:n}}onBeforeSendHeadersCallback(e){let t=[];for(var n=0;n<e.requestHeaders.length;++n){const o=e.requestHeaders[n].name.toLowerCase();"origin"===o?this._originRequest.set(e.requestId,e.requestHeaders[n].value):("access-control-request-headers"===o||/^x-/.test(o))&&t.push(o)}return t.length&&this._originRequestHeaders.set(e.requestId,t.join(",")),{requestHeaders:e.requestHeaders}}onBeforeRequestCallback(e){return this.redirectToMatchingRule(e)}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(3),s=n(4),r=n(0);let i;function c(){document.getElementById("J_Switch").classList.add("ant-switch-checked"),document.getElementById("J_SwitchInner").innerHTML="On"}function l(){document.getElementById("J_Switch").classList.remove("ant-switch-checked"),document.getElementById("J_SwitchInner").innerHTML="Off"}window.require.config({paths:{vs:"../lib/monaco-editor/min/vs"}}),chrome.storage.sync.get("config_for_shown",e=>{let t=1;window.require(["vs/language/json/monaco.contribution"],()=>{function n(){const e=i.getValue(),t=o.stripJsonComments(e).replace(/\s+/g,"").replace(s.cleanJSONReg,(e,t,n)=>n);try{console.log("=========data"),console.log(e),console.log("=========config"),console.log(t)}catch(e){console.error(e)}chrome.storage.sync.set({config_for_shown:e,config:t},()=>{})}i=window.monaco.editor.create(document.getElementById("container"),{value:e.config_for_shown||s.DEFAULT_DATA,language:"json",minimap:{enabled:!1},fontFamily:"source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace",fontSize:13,fontLigatures:!0,contextmenu:!1,scrollBeyondLastLine:!1,folding:!0,showFoldingControls:"always",useTabStops:!0,wordBasedSuggestions:!0,quickSuggestions:!0,suggestOnTriggerCharacters:!0}),n(),window.monaco.languages.registerCompletionItemProvider("json",{provideCompletionItems:()=>{const e=[];r.default.urls.forEach(t=>{t&&e.push({label:t,kind:window.monaco.languages.CompletionItemKind.Text})});const t=[{label:"rule",kind:window.monaco.languages.CompletionItemKind.Method,insertText:{value:'[\n  "${1:from}",\n  "${1:to}",\n],'}}];return[...e,...t]}}),i.onDidChangeModelContent(()=>{n()}),i.onDidScrollChange(()=>{t&&(t=0,i.trigger("anyString","editor.action.formatDocument"))})})}),chrome.storage.sync.get("disabled",e=>{document.getElementById("J_SwitchArea").style.opacity="1","disabled"===e.disabled?l():c()}),document.getElementById("J_Switch").addEventListener("click",e=>{e.currentTarget.classList.contains("ant-switch-checked")?(l(),chrome.storage.sync.set({disabled:"disabled"})):(chrome.storage.sync.set({disabled:""}),c())}),document.getElementById("J_OpenInNewTab").addEventListener("click",e=>{chrome.tabs.create({url:chrome.extension.getURL("XSwitch.html")},function(e){})}),document.getElementById("J_OpenReadme").addEventListener("click",e=>{chrome.tabs.create({url:"https://yuque.com/jiushen/blog/xswitch-readme"},function(e){})}),document.addEventListener("keydown",e=>{83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.preventDefault()},!1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=1,s=2,r=()=>"",i=(e,t,n)=>e.slice(t,n).replace(/\S/g," ");t.stripJsonComments=function(e,t){const n=!1===(t=t||{}).whitespace?r:i;let c=!1,l=!1,a=0,u="";for(let t=0;t<e.length;t++){const r=e[t],i=e[t+1];if(l||'"'!==r||"\\"===e[t-1]&&"\\"!==e[t-2]||(c=!c),!c)if(l||r+i!=="//"){if(l===o&&r+i==="\r\n"){l=!1,u+=n(e,a,++t),a=t;continue}if(l===o&&"\n"===r)l=!1,u+=n(e,a,t),a=t;else{if(!l&&r+i==="/*"){u+=e.slice(a,t),a=t,l=s,t++;continue}if(l===s&&r+i==="*/"){l=!1,u+=n(e,a,++t+1),a=t+1;continue}}}else u+=e.slice(a,t),a=t,l=o,t++}return u+(l?n(e.substr(a),0,0):e.substr(a))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanJSONReg=/(,+)([^a-z0-9["])/gi,t.DEFAULT_DATA='{\n  // Use IntelliSense to learn about possible links.\n  // Type `rule` to quick insert rule.\n  // 输入 rule 来快速插入规则\n  // For more information, visit: https://github.com/yize/xswitch\n  "proxy": [\n    [\n      ".production.min.js",\n      // ".production(.min)?.js",\n      ".development.js"\n      // "react.development.js",\n    ],\n    [\n      "16.4.1",\n      "16.4.0",\n    ]\n    // then try visit https://unpkg.com/react@16.4.1/umd/react.production.min.js\n  ],\n  // urls that want CORS\n  "cors": [\n    "mocks.a.com",\n    "mocks.b.com"\n  ]\n}\n'}]);